{{ signature }}
    for (size_t i = 0; i < {{ m }}; ++i) {
        for (size_t j = 0; j < {{ n }}; ++j) {
            {{ acc_type }} acc = {{ acc_init }};
            for (size_t b_idx = 0; b_idx < {{ batch }}; ++b_idx) {
                for (size_t t = 0; t < {{ k }}; ++t) {
                    acc += {{ batch1_access }} * {{ batch2_access }};
                }
            }
            {{ out_access }} = ({{ beta }}) * {{ input_access }} + ({{ alpha }}) * acc;
        }
    }
}
